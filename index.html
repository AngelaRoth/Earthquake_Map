<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Earthquake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">

  <!-- Make links open in New Windows -->
  <base target="_blank">
</head>
<body>
  <header>
    <h1>QuakeZone</h1>
    <div id="header-buttons">
      <button data-bind="click: displayAll" class="header-button">All Results</button>
      <button data-bind="click: getNewScreen" class="header-button">New Search</button>
    </div>

  </header>


  <div id="list-drawer" class="open">
    <div class="inner-box">

<!-- ko if: newForm() -->
      <div id="newForm-box">
        <p class="first-paragraph">Welcome to QuakeZone. Seach for Earthquakes between a range of Dates and Magnitudes.</p>

        <!-- ko if: errorReported() -->
          <div id="error-box" data-bind="text: errorText"></div>
        <!-- /ko -->

        <form id="new-form" data-bind="submit: loadEarthquakes">
          <div class="input-pair">
            <label >Start Time <span class="gold">*</span> </label>
            <input data-bind="value: startTime" id="start-time" class="input-field" type="text" placeholder="ex. 2000-01-01">
          </div>
          <div class="input-pair">
            <label >End Time <span class="gold">*</span> </label>
            <input data-bind="value: endTime" id="end-time" class="input-field" type="text" placeholder="ex. 2016-12-31">
          </div>
          <div class="input-pair">
            <label >Min Magnitude <span class="gold">*</span> </label>
            <input data-bind="value: minMagnitude" id="min-magnitude" class="input-field" type="text" placeholder="ex. 7.7">
          </div>
          <div class="input-pair">
            <label >Max Magnitude <span class="gold">*</span> </label>
            <input data-bind="value: maxMagnitude" id="max-magnitude" class="input-field" type="text" placeholder="ex. 10">
          </div>
          <div class="astrix-button-pair">
            <p class="last-paragraph"><span class="gold">*</span> See Below</p>
            <button id="new-button" type="submit">Get Earthquakes</button>
          </div>
        </form>
        <ul>
          <li>Dates must be formatted: <span class="gold">yyyy-mm-dd</span></li>
          <li>Magnitudes must be numerical.</li>
        </ul>
        <p>Beware that the search craps out if more than 20,000 Quakes are found (yes, there are a lot of Quakes out there, especially at the lower magnitudes!).</p>
        <p>A Starting Search Date is required; if none is entered a date of 1900-01-01 will be assumed. The other fields may be left blank; no limit will be placed on that end of the search, but again, BEWARE of asking for too many quakes!</p>
      </div>
<!-- /ko -->


<!-- ko if: searchForm() -->
      <div id="searchForm-box">
        <form id="search-form" data-bind="submit: searchResults">
          <input data-bind="value: searchString" id="search-string" type="text" placeholder="Search Results List  (i.e. New Guinea)">
          <button id="search-button" type="submit">Go</button>
        </form>
      </div>
      <ul class="results-list" data-bind="foreach: quakeArray">
        <!--ko if: included() -->
          <li class="results-list-item" data-bind="text: place, click: $parent.listItemClicked"></li>
        <!-- /ko -->
      </ul>
<!-- /ko -->

<!-- ko if: locationForm() -->
      <div id="butt-div">
        <button id="back-to-results-button" data-bind="click: backToResults">Back to Search Results</button>
      </div>
      <div id="results-box" data-bind="with: currentLocation">
        <p class="first-paragraph">At <span data-bind="text: prettyTime"></span>, an Earthquake of magnitude <span class="red" data-bind="text: magnitude"></span> with a significance of <span class="red" data-bind="text: significance"></span> hit <span data-bind="text: place"></span>. [<a data-bind="attr: { href: url }">More</a>]</p>

        <h3 class="green">Images of the Region:</h3>
        <p class="light-green first-paragraph">These images come from the region surrounding the Epicenter; these are the places that felt it. A lack of images indicates a remote location. <b>Click</b> on images to enlarge them!</p>
        <ul id="photos-list"  data-bind="foreach: photos">
          <li>
            <img class="list-image" data-bind="attr: { src: photoURL }, click: openPhotoWindow">
            <span>Source: <span data-bind="html: attribution"></span></span>
          </li>
        </ul>

        <h3 class="blue">NYT Articles After the Quake:</h3>
        <p class="light-blue first-paragraph">These articles appeared in the New York Times in the Two Weeks following the Quake. The number and relevancy of the articles show how much this quake resonated on the world stage.</p>
        <ul id="articles-list" data-bind="foreach: articles">
          <li>
            <a data-bind="text: headline, attr: { href: artURL }"></a>
            <p data-bind="text: snippet"></p>
          </li>
        </ul>
      </div>




<!-- /ko -->

    </div>
  </div>
  <img id="list-drawer-button" class="open" src="img/open.svg" alt="">

  <div id="map"></div>


  <script src="js/knockout-3.4.2.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="js/lib.js"></script>
  <script src="js/app.js"></script>
  <script async src="js/map.js"></script>
  <script async defer
      src=
      "https://maps.googleapis.com/maps/api/js?libraries=places,geometry,drawing&key=AIzaSyCNgnR6srI-o-L_1msz-0AA03afwiyOrxA&v=3&callback=viewModel.initMap">
  </script>


</body>
</html>
